---
// src/components/AboutSection.astro
---

<section id="about-section" class="relative bg-[#E6E6E6] text-gray-900 py-24 overflow-hidden">
  
  <div class="max-w-7xl mx-auto px-6 relative z-10">
    <h1 class="about-title text-[4rem] md:text-[8rem] font-black tracking-tighter text-center text-[#EA4726] mb-32 opacity-0 translate-y-20 drop-shadow-sm">
      HISTORY
    </h1>

    <div class="relative border-l-2 border-black ml-4 md:ml-[50%] md:translate-x-[-1px] space-y-32 pb-40">
      
      <div class="history-block relative pl-12 md:pl-16 md:w-1/2 md:ml-auto md:text-left group">
        <div class="absolute left-[-5px] top-3 w-3 h-3 bg-[#EA4726] rounded-full md:left-[-6px] shadow-[0_0_10px_#EA4726]"></div>
        
        <h3 class="text-6xl md:text-8xl font-black text-black mb-4 transition-colors duration-500 group-hover:text-[#EA4726]">1961</h3>
        <h4 class="text-3xl font-bold text-gray-800 mb-4">The Foundation</h4>
        <p class="text-gray-600 text-lg md:text-xl leading-relaxed max-w-md font-medium">
          Established as <b>Calicut Regional Engineering College (CREC)</b>. We started with just three disciplines: Civil, Mechanical, and <b class="text-[#EA4726]">Electrical Engineering</b>.
        </p>
      </div>

      <div class="history-block relative pl-12 md:pl-0 md:pr-16 md:w-1/2 md:mr-auto md:ml-[-100%] md:text-right group">
        <div class="absolute left-[-5px] top-3 w-3 h-3 bg-[#EA4726] rounded-full md:left-auto md:right-[-7px] shadow-[0_0_10px_#EA4726]"></div>
        
        <h3 class="text-6xl md:text-8xl font-black text-black mb-4 transition-colors duration-500 group-hover:text-[#EA4726]">1986</h3>
        <h4 class="text-3xl font-bold text-gray-800 mb-4">The Expansion</h4>
        <p class="text-gray-600 text-lg md:text-xl leading-relaxed max-w-md md:ml-auto font-medium">
          Became a recognized <b>Research Center</b>. We launched postgraduate programs in Instrumentation & Control, paving the way for doctoral studies.
        </p>
      </div>

      <div class="history-block relative pl-12 md:pl-16 md:w-1/2 md:ml-auto md:text-left group">
        <div class="absolute left-[-5px] top-3 w-3 h-3 bg-[#EA4726] rounded-full md:left-[-6px] shadow-[0_0_10px_#EA4726]"></div>
        
        <h3 class="text-6xl md:text-8xl font-black text-black mb-4 transition-colors duration-500 group-hover:text-[#EA4726]">1997</h3>
        <h4 class="text-3xl font-bold text-gray-800 mb-4">The Split</h4>
        <p class="text-gray-600 text-lg md:text-xl leading-relaxed max-w-md font-medium">
          To master modern tech, we trifurcated into <b class="text-[#EA4726]">EEE</b>, ECE, and CS. We kept our identity and expanded into EV & High Voltage Engineering.
        </p>
      </div>

      <div class="history-block relative pl-12 md:pl-0 md:pr-16 md:w-1/2 md:mr-auto md:ml-[-100%] md:text-right group">
        <div class="absolute left-[-5px] top-3 w-3 h-3 bg-[#EA4726] rounded-full md:left-auto md:right-[-7px] shadow-[0_0_10px_#EA4726]"></div>
        
        <h3 class="text-6xl md:text-8xl font-black text-black mb-4 transition-colors duration-500 group-hover:text-[#EA4726]">2002</h3>
        <h4 class="text-3xl font-bold text-gray-800 mb-4">NIT Status</h4>
        <p class="text-gray-600 text-lg md:text-xl leading-relaxed max-w-md md:ml-auto font-medium">
          Elevated to <b>National Institute of Technology</b>. An Institute of National Importance with autonomy to align with India's industrial future.
        </p>
      </div>

      <div class="history-block relative pl-12 md:pl-16 md:w-1/2 md:ml-auto md:text-left group">
        <div class="absolute left-[-5px] top-3 w-3 h-3 bg-[#EA4726] rounded-full md:left-[-6px] shadow-[0_0_20px_#EA4726]"></div>
        
        <h3 class="text-6xl md:text-8xl font-black text-[#EA4726] mb-4">EEA</h3>
        <h4 class="text-3xl font-bold text-gray-800 mb-4">A Engineering association</h4>
        <p class="text-gray-600 text-lg md:text-xl leading-relaxed max-w-md font-medium">
          EEA plans to bridge the gap between exams and industry. From technical workshops to <b class="text-[#EA4726]">Minnal Onam</b>, we keep the energy alive.
        </p>
      </div>

    </div>
  </div>
</section>

<script>
  import gsap from 'gsap';
  import { ScrollTrigger } from 'gsap/ScrollTrigger';

  gsap.registerPlugin(ScrollTrigger);

  // 1. Reveal the Main Title
  gsap.to('.about-title', {
    scrollTrigger: {
      trigger: '#about-section',
      start: 'top 80%',
      end: 'top 40%',
      scrub: 1
    },
    opacity: 1,
    y: 0,
    duration: 1
  });

  // 2. Animate Timeline Blocks
  const blocks = document.querySelectorAll('.history-block');

  blocks.forEach((block, i) => {
    const isMobile = window.innerWidth < 768;
    const isLeft = i % 2 !== 0; 
    
    // Slide in from sides
    const startX = isMobile ? 50 : (isLeft ? -100 : 100);

    gsap.set(block, { opacity: 0, x: startX });

    gsap.to(block, {
      scrollTrigger: {
        trigger: block,
        start: 'top 85%',
        end: 'top 60%',
        scrub: 1,
        toggleActions: 'play none none reverse'
      },
      opacity: 1,
      x: 0,
      duration: 1
    });
  });
</script>